<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>ChangePassword</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/formStyles.css">
</head>


<body>
    <div class="titlePage">
        <div>
            <span class="fontTitle">
                Rete Distribuzione Sacche Di Sangue             
            </span>
        </div>
    </div>
    
    
    <div class="containerForm">
        <form id="myForm">
            <div class="containerFormPass">
                <label>Codice Fiscale</label>
                <div class="form-group pass_show"> 
                    <input type="text" class="form-control" placeholder="Codice Fiscale" id="cdf">
                </div>
                   <label>New Password</label>
                <div class="form-group pass_show"> 
                    <input id="newPass" type="password" class="form-control" placeholder="New Password">
                    <input type="checkbox" onclick="showNewPass();">Show Password
                </div> 
                   <label>Confirm Password</label>
                <div class="form-group pass_show"> 
                    <input id="verifyPass" type="password" class="form-control" placeholder="Confirm Password">
                    <input type="checkbox" onclick="showVerifyPass();">Show Password
                </div> 
            </div>
        </form>
        <div class="row" style="margin: 0px 33%;">
            <button class="btn" onclick="window.location.href='Login.html';"><img class="return" src="assets/img/returnBlue.png" /></button>
            <button type="submit" onclick="cambioPassword();" class="btn btn-primary" style="margin-left: 25%">Cambia</button>
        </div>
    </div>
    
    
    <script>

          function showNewPass() {
            
            var nPass = document.getElementById("newPass");
  
            if (nPass.type === "password") {
              nPass.type = "text";
            }
            else {
              nPass.type = "password";
            }
            
          }
          
          function showVerifyPass() {
            
            var vnPass = document.getElementById("verifyPass");
  
            if (vnPass.type === "password") {
              vnPass.type = "text";
            }
            else {
              vnPass.type = "password";
            }
            
          }

    
       cambioPassword = function(){
            var xhttp = new XMLHttpRequest();
            var url ="http://127.0.0.1:8080/rest/autentificazione/cambiopassword/"+cdf.value;
            xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200 ) {
                            window.location.href='Login.html';
                        }
            };
    
    
            xhttp.onerror = function(){
                       alert("impossibile inviare la richiesta");
            };
    
    
            xhttp.open("PUT", url, true);
            xhttp.send(newPass.value);
    
        };
    </script>
    
    <div class="footer"></div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    
</body>

</html>